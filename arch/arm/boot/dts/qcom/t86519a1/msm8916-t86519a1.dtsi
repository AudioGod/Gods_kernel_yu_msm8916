/* Copyright (c) 2014, The Linux Foundation. All rights reserved.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 and
 * only version 2 as published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 */

#include "../msm8916-qrd.dtsi"
#include "msm8916-camera-sensor-t86519a1.dtsi"
#include "dsi-panel-txd-hx8394d-720p-video.dtsi"
#include "dsi-panel-ofilm-hx8394d-720p-video.dtsi"

&soc {

	i2c@78ba000 {
		nfc-nci@e {
			status = "disabled";
		};
	};

	i2c@78b9000 { /* BLSP1 QUP5 */

		goodix@5d {
			compatible = "goodix,gt9xx";
			reg = <0x5d>;
			interrupt-parent = <&msm_gpio>;
			interrupts = <13 0x2008>;
			vdd-supply = <&pm8916_l17>;
			vcc_i2c-supply = <&pm8916_l6>;
			pinctrl-names = "pmx_ts_active","pmx_ts_suspend";
			pinctrl-0 = <&ts_int_active &ts_reset_active>;
			pinctrl-1 = <&ts_int_suspend &ts_reset_suspend>;
			goodix,name = "goodix-ts";
			goodix,family-id = <0x36>;
			goodix,rst-gpio = <&msm_gpio 12 0x0>;
			goodix,irq-gpio = <&msm_gpio 13 0x2008>;
			goodix,display-coords = <0 0 720 1280>;
			goodix,panel-coords = <0 0 720 1280>;
			goodix,button-map= <139 102 158>;
			goodix,no-force-update;
			goodix,i2c-pull-up;
			goodix,group-id = <1>;
			goodix,hard-reset-delay-ms = <20>;
			goodix,soft-reset-delay-ms = <200>;
			goodix,num-max-touches = <5>;
			goodix,fw-delay-aa-ms = <30>;
			goodix,fw-delay-55-ms = <30>;
			goodix,fw-upgrade-id1 = <0x79>;
			goodix,fw-upgrade-id2 = <0x18>;
			goodix,fw-delay-readid-ms = <10>;
			goodix,fw-delay-era-flsh-ms = <2000>;
			goodix,fw-auto-cal;
			goodix,ignore-id-check;
			goodix,cfg-group1 =[
			00 D0 02 00 05 05 34 00 01 C8 23
			05 50 32 03 05 00 00 FF 7F 00 00
			00 17 1A 1E 14 8B 2B 0D 3C 3E D3
			07 00 00 02 01 33 11 00 00 00 00
			00 00 00 32 00 00 29 1E 5A 94 C5
			02 07 00 00 04 D7 21 00 B1 29 00
			90 34 00 77 41 00 64 51 00 64 00
			00 00 00 00 00 00 00 00 00 00 00
			00 00 00 00 00 00 00 00 00 00 00
			00 00 00 00 00 00 00 08 19 00 00
			46 00 02 04 06 08 0A 0C 0E 10 12
			14 16 18 1A FF 00 00 00 00 00 00
			00 00 00 00 00 00 00 00 00 00 13
			12 10 0F 0C 0A 08 06 04 02 00 16
			18 1C 1D 1E 1F 20 21 22 24 26 FF
			FF FF FF 00 00 00 00 00 00 00 00
			00 00 00 00 00 00 00 00 BF 01];
			goodix,cfg-group2 =[
			41 D0 02 00 05 05 35 20 01 08 28
			0F 50 32 03 05 00 00 00 00 00 00
			00 17 19 1E 14 8A 2A 0B 2B 2D 31
			0D 00 00 00 83 02 1D 00 01 00 00
			00 00 00 32 00 0A 00 23 4B 94 45
			02 07 14 00 04 9A 25 00 7A 2C 00
			5D 33 00 4B 3B 00 3C 45 00 3C 00
			00 00 00 00 00 00 00 00 00 00 00
			00 00 00 00 00 00 00 00 00 00 00
			00 00 00 00 00 00 00 00 00 00 00
			00 00 02 04 06 08 0A 0C 0E 10 12
			14 16 FF FF FF 00 00 00 00 00 00
			00 00 00 00 00 00 00 00 00 00 12
			10 0F 0C 0A 08 06 04 02 00 16 18
			1C 1D 1E 1F 20 21 22 24 FF FF FF
			FF FF FF 00 00 00 00 00 00 00 00
			00 00 00 00 00 00 00 00 8D 01];
		};

		silead@40 {
			compatible = "silead,gsl-tp";
			reg = <0x40>;
			interrupt-parent = <&msm_gpio>;
			interrupts = <13 0x2008>;
			vdd-supply = <&pm8916_l17>;
			vcc_i2c-supply = <&pm8916_l6>;
			/* pins used by touchscreen */
			pinctrl-names = "pmx_ts_active","pmx_ts_suspend";
			pinctrl-0 = <&ts_int_active &ts_reset_active>;
			pinctrl-1 = <&ts_int_suspend &ts_reset_suspend>;
			silead,name = "gsl915";
			silead,family-id = <0x36>;
			silead,reset-gpio = <&msm_gpio 12 0x0>;
			silead,irq-gpio = <&msm_gpio 13 0x2008>;
			silead,display-coords = <0 0 720 1280>;
			silead,panel-coords = <0 0 720 1280>;
			silead,button-map= <139 102 158>;
			silead,no-force-update;
			silead,i2c-pull-up;
			silead,group-id = <1>;
			silead,hard-reset-delay-ms = <20>;
			silead,soft-reset-delay-ms = <200>;
			silead,num-max-touches = <5>;
			silead,fw-delay-aa-ms = <30>;
			silead,fw-delay-55-ms = <30>;
			silead,fw-upgrade-id1 = <0x79>;
			silead,fw-upgrade-id2 = <0x18>;
			silead,fw-delay-readid-ms = <10>;
			silead,fw-delay-era-flsh-ms = <2000>;
			silead,fw-auto-cal;
			silead,ignore-id-check;
		};
	};

	flash_ocp8110:flashlight {
		compatible = "qcom,leds-gpio-flash";
		status = "okay";
		pinctrl-names = "ocp8110_default";
		pinctrl-0 = <&ocp8110_default>;
		qcom,flash-en = <&msm_gpio 31 0>;
		qcom,flash-now = <&msm_gpio 32 0>;
		linux,name = "flashlight";
		linux,default-trigger = "flashlight-trigger";
	};

	sound {
		compatible = "qcom,msm8x16-audio-codec";
		qcom,model = "msm8x16-skui-snd-card";
		qcom,msm-snd-card-id = <0>;
		qcom,msm-ext-pa = "quaternary";
		qcom,msm-codec-type = "internal";
		qcom,msm-mbhc-hphl-swh = <1>;
		qcom,msm-mbhc-gnd-swh = <1>;
		qcom,msm-hs-micbias-type = "internal";
		qcom,audio-routing =
			"RX_BIAS", "MCLK",
			"SPK_RX_BIAS", "MCLK",
			"INT_LDO_H", "MCLK",
			"MIC BIAS Internal1", "Handset Mic",
			"MIC BIAS Internal2", "Headset Mic",
			"MIC BIAS Internal1", "Secondary Mic",
			"AMIC1", "MIC BIAS Internal1",
			"AMIC2", "MIC BIAS Internal2",
			"AMIC3", "MIC BIAS Internal1",
			"Headphones", "HPOUTL",
			"Headphones", "HPOUTR";
		pinctrl-names = "cdc_lines_act",
				"cdc_lines_sus",
				"cdc_lines_quat_ext_act",
				"cdc_lines_quat_ext_sus";
		pinctrl-0 = <&cdc_pdm_lines_act>;
		pinctrl-1 = <&cdc_pdm_lines_sus>;
		pinctrl-2 = <&cdc_pdm_lines_act &ext_cdc_tlmm_lines_act>;
		pinctrl-3 = <&cdc_pdm_lines_sus &ext_cdc_tlmm_lines_sus>;
		clocks = <&clock_rpm clk_bb_clk2>;
		clock-names = "wm_mclk";
	};

	bq2022a {
		compatible = "bq2022a";
		status= "okay";
	};
};

&pm8916_mpps {
	mpp@a300 { /* MPP 4 */
		/* Backlight PWM */
		qcom,mode = <1>;		/* Digital output */
		qcom,invert = <0>;		/* Disable Invert */
		qcom,src-sel = <4>;		/* DTEST1 */
		qcom,vin-sel = <0>;		/* VPH_PWR */
		qcom,master-en = <1>;		/* Enable MPP */
	};
};

&mdss_mdp {
	qcom,mdss-pref-prim-intf = "dsi";
};

&pmx_mdss {
	qcom,num-grp-pins = <1>;
	qcom,pins = <&gp 25>;
};

&mdss_dsi0 {
	qcom,dsi-pref-prim-pan = <&dsi_txd_hx8394d_720p_video>;
	qcom,dsi-pref-sub-pan = <&dsi_ofilm_hx8394d_720p_video>;
	pinctrl-names = "mdss_default", "mdss_sleep";
	pinctrl-0 = <&mdss_dsi_active>;
	pinctrl-1 = <&mdss_dsi_suspend>;

	qcom,platform-reset-gpio = <&msm_gpio 25 0>;

	vsp-supply = <&tps65132_pos>;
	vsn-supply = <&tps65132_neg>;
	qcom,panel-supply-entries {
		#address-cells = <1>;
		#size-cells = <0>;
		qcom,panel-supply-entry@2 {
			reg = <2>;
			qcom,supply-name = "vsp";
			qcom,supply-min-voltage = <5400000>;
			qcom,supply-max-voltage = <5400000>;
			qcom,supply-enable-load = <200>;
			qcom,supply-disable-load = <0>;
		};
		qcom,panel-supply-entry@3 {
			reg = <3>;
			qcom,supply-name = "vsn";
			qcom,supply-min-voltage = <5400000>;
			qcom,supply-max-voltage = <5400000>;
			qcom,supply-enable-load = <40>;
			qcom,supply-disable-load = <0>;
		};
	};
};

&dsi_txd_hx8394d_720p_video {
	qcom,cont-splash-enabled;
};

&dsi_ofilm_hx8394d_720p_video {
	qcom,cont-splash-enabled;
};

&tlmm_pinmux {
	ocp8110_pins {
		qcom,pins = <&gp 31>, <&gp 32>;
		qcom,num-grp-pins = <2>;
		qcom,pin-func = <0>;
		label = "ocp8110_pins";
		ocp8110_default: en_default {
			  drive-strength = <2>;
			  bias-pull-down;
		};
	};

	tps65132-en-pin {
		qcom,pins = <&gp 1>, <&gp 0>;
		qcom,num-grp-pins = <1>;
		label = "tps65132_en_pins";
		qcom,pin-func = <0>;
		tps65132_en_default: en-default {
			drive-strength = <2>;
			bias-pull-down;
		};
	};
};

&i2c_0 { /* BLSP1 QUP2 */
	di_ap3426@1e {
		compatible = "di_ap3426";
		reg = <0x1e>;
		interrupt-parent = <&msm_gpio>;
		interrupts = <113 0x2002>;
		vdd-supply = <&pm8916_l17>;
		vio-supply = <&pm8916_l6>;
		ap3426,irq-gpio= <&msm_gpio 113 0x2002>;
	};

	tps65132@3e {
		compatible = "ti,tps65132";
		reg = <0x3e>;
		ti,en-gpio-lpm;
		pinctrl-names = "default";
		pinctrl-0 = <&tps65132_en_default>;

		regulators {
			tps65132_pos: pos-boost {
				regulator-name = "tps65132-pos";
				regulator-min-microvolt = <5400000>;
				regulator-max-microvolt = <5400000>;
				ti,discharge-enable;
				ti,enable-time = <800>;
				ti,current-limit = <200000>;
				ti,en-gpio = <&msm_gpio 0 0>;
			};

			tps65132_neg: neg-boost {
				regulator-name = "tps65132-neg";
				regulator-min-microvolt = <5400000>;
				regulator-max-microvolt = <5400000>;
				ti,discharge-enable;
				ti,enable-time = <800>;
				ti,current-limit = <40000>;
				ti,en-gpio = <&msm_gpio 1 0>;
			};
		};
	};

	mpu6050@68 {
		compatible = "invn,mpu6050";
		reg = <0x68>;
		pinctrl-names = "mpu_default","mpu_sleep";
		pinctrl-0 = <&mpu6050_default>;
		pinctrl-1 = <&mpu6050_sleep>;
		interrupt-parent = <&msm_gpio>;
		interrupts = <115 0x2>;
		vdd-supply = <&pm8916_l17>;
		vlogic-supply = <&pm8916_l16>;
		vi2c-supply = <&pm8916_l6>;
		invn,gpio-int = <&msm_gpio 115 0x2>;
		invn,place = "Portrait Up Back Side";
	};

	akm@c {
		compatible = "ak,ak09911";
		reg = <0x0c>;
		vdd-supply = <&pm8916_l17>;
		vio-supply = <&pm8916_l6>;
		akm,layout = <0x6>;
		akm,auto-report;
	};
};

&sdhc_2 {
	interrupts = <0 1>;
	interrupt-map = <0 &intc 0 125 0
		1 &intc 0 221 0>;
	interrupt-names = "hc_irq", "pwr_irq";
	/delete-property/ cd-gpios;
};

